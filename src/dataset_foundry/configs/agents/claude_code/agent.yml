container:
  image: "claude-code-agent:latest"
  build:
    args:
      TZ: "${TZ:-America/Los_Angeles}"
  cap_add:
    - NET_ADMIN
    - NET_RAW
  environment:
    ANTHROPIC_API_KEY: "${ANTHROPIC_API_KEY}"
    NODE_OPTIONS: "--max-old-space-size=4096"
    CLAUDE_CONFIG_DIR: "/home/node/.claude"
  command: ["claude --verbose -p --output-format stream-json --dangerously-skip-permissions \"$PROMPT\""]

logs:
  format: json
